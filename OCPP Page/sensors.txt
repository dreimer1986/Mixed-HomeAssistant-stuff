template:
- sensor:
  - unit_of_measurement: kWh
    device_class: ENERGY
    default_entity_id: sensor.ocpp1_energy
    name: Daniel
    state: None
    availability: "{{ is_number(states('sensor.ocpp1_energy')) }}"
  - unit_of_measurement: kWh
    device_class: ENERGY
    default_entity_id: sensor.ocpp2_energy
    name: Andere
    state: None
    availability: "{{ is_number(states('sensor.ocpp2_energy')) }}"
  - unique_id: ocpp1_cost
    unit_of_measurement: €
    device_class: MONETARY
    default_entity_id: sensor.ocpp1_cost
    availability: '{{ states(''sensor.ocpp1_energy'') not in [''unavailable'', ''unknown'']
      and states(''input_number.energy_cost'') not in [''unavailable'', ''unknown'']
      }}'
    name: Daniel Kosten
    state: '{{ (states(''sensor.ocpp1_energy'') | float * states(''input_number.energy_cost'')
      | float) | round(2) }}'
  - unique_id: ocpp2_cost
    unit_of_measurement: €
    device_class: MONETARY
    default_entity_id: sensor.ocpp2_cost
    availability: '{{ states(''sensor.ocpp2_energy'') not in [''unavailable'', ''unknown'']
      and states(''input_number.energy_cost'') not in [''unavailable'', ''unknown'']
      }}'
    name: Andere Kosten
    state: '{{ (states(''sensor.ocpp2_energy'') | float * states(''input_number.energy_cost'')
      | float) | round(2) }}'
  - unique_id: ocpp1_prevmon_cost
    unit_of_measurement: €
    device_class: MONETARY
    default_entity_id: sensor.ocpp1_prevmon_cost
    availability: '{{ states(''input_number.ocpp1_last_month'') not in [''unavailable'',
      ''unknown''] and states(''input_number.energy_cost'') not in [''unavailable'',
      ''unknown''] }}'
    name: Daniel Kosten Vormonat
    state: '{{ (states(''input_number.ocpp1_last_month'') | float * states(''input_number.energy_cost'')
      | float) | round(2) }}'
  - unique_id: ocpp2_prevmon_cost
    unit_of_measurement: €
    device_class: MONETARY
    default_entity_id: sensor.ocpp2_prevmon_cost
    availability: '{{ states(''input_number.ocpp2_last_month'') not in [''unavailable'',
      ''unknown''] and states(''input_number.energy_cost'') not in [''unavailable'',
      ''unknown''] }}'
    name: Andere Kosten Vormonat
    state: '{{ (states(''input_number.ocpp2_last_month'') | float * states(''input_number.energy_cost'')
      | float) | round(2) }}'

shell_command:
  loadocppcsv: python ocpp_ui.py
